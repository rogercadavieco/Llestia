<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Llestia - Optimización y Automatización B2B</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Font "Inter" -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- TypeIt.js para animación de máquina de escribir -->
    <script src="https://unpkg.com/typeit@8.7.1/dist/index.umd.js"></script>
    
    <style>
        /* Aplicar la fuente Inter como predeterminada */
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        /* Estilo personalizado para el cursor de TypeIt */
        .ti-cursor {
            color: #3b82f6; /* Azul de Tailwind (blue-600) */
            font-weight: 800;
        }
    </style>
</head>
<body class="bg-white text-gray-800">

    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-40"> <!-- z-40 para estar debajo del modal -->
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <!-- Branding (Logo Azul) -->
            <div class="text-2xl font-bold text-blue-600">
                Llestia
            </div>
            <!-- Links (Header de Conversión) -->
            <div class="flex space-x-4">
                <!-- Botón Calculadora (Oculto por defecto) -->
                <a href="#roi-calculator" id="nav-roi-link" class="text-gray-600 hover:text-blue-600 transition-all duration-300 opacity-0 invisible transform -translate-y-2 py-2 px-3">
                    Calculadora ROI
                </a>
                <!-- Botón Escáner (Oculto por defecto) - CAMBIADO A <button> -->
                <button id="nav-scan-button" class="open-modal-btn bg-blue-600 text-white px-5 py-2 rounded-lg font-medium hover:bg-blue-700 transition-all duration-300 opacity-0 invisible transform -translate-y-2">
                    Iniciar Escáner
                </button>
            </div>
        </nav>
    </header>

    <!-- Hero Section con Gradiente -->
    <main class="bg-gradient-to-br from-white to-gray-50">
        <div class="container mx-auto px-6 py-20 md:py-32 text-center">
            
            <!-- Título Principal -->
            <h1 class="text-4xl md:text-6xl font-extrabold text-gray-900 mb-6 leading-tight">
                Escala tu negocio, no tus costes.
            </h1>
            
            <!-- Subtítulo Animado -->
            <div class="text-3xl md:text-5xl font-extrabold text-blue-600 mb-12 h-24 md:h-16">
                <span id="typeit-hero"></span>
            </div>

            <!-- Párrafo de Descripción -->
            <p class="text-md md:text-lg text-gray-600 max-w-2xl mx-auto mb-10">
                Llestia no es una consultoría. Es un sistema de diagnóstico y optimización que te da el plan exacto para escalar tus ventas B2B.
            </p>
            
            <!-- CTAs Principales -->
            <div class="flex flex-col sm:flex-row justify-center gap-4">
                <!-- CAMBIADO A <button> -->
                <button class="open-modal-btn inline-block bg-blue-600 text-white font-bold py-4 px-8 rounded-lg text-lg shadow-lg hover:bg-blue-700 transition duration-300 transform hover:-translate-y-0.5">
                    Iniciar Escáner de Fugas
                </button>
                <a href="#roi-calculator" id="cta-roi" class="inline-block bg-white text-gray-800 font-bold py-4 px-8 rounded-lg text-lg shadow-lg hover:bg-gray-100 transition duration-300 border border-gray-300 transform hover:-translate-y-0.5">
                    Calcular mi ROI
                </a>
            </div>
        </div>
    </main>

    <!-- Sección "El Sistema Llestia" -->
    <section class="bg-white py-20 md:py-24">
        <div class="container mx-auto px-6">
            <!-- Título de la Sección -->
            <div class="text-center mb-16">
                <h2 class="text-4xl font-extrabold text-gray-900 mb-4">El Sistema Llestia</h2>
                <!-- Texto Actualizado -->
                <p class="text-lg text-gray-600 max-w-2xl mx-auto">No más conjeturas. Solo un proceso de 3 fases para la optimización total.</p>
            </div>

            <!-- Pasos (Grid) -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                
                <!-- Paso 1: Diagnóstico -->
                <div class="bg-gray-50 p-8 rounded-xl shadow-lg border border-gray-200 hover:shadow-xl transition-shadow duration-300">
                    <!-- Icono -->
                    <div class="bg-blue-100 text-blue-600 w-16 h-16 rounded-full flex items-center justify-center mb-6 shadow-md">
                        <svg class="w-8 h-8" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6a7.5 7.5 0 107.5 7.5h-7.5V6z" />
                            <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 10.5H21A7.5 7.5 0 0013.5 3v7.5z" />
                        </svg>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-3">1. Diagnóstico</h3>
                    <p class="text-gray-600">Nuestro "Escáner de Fugas" analiza tu embudo de ventas, marketing y operaciones para encontrar puntos ciegos e ineficiencias.</p>
                </div>

                <!-- Paso 2: Simulación -->
                <div class="bg-gray-50 p-8 rounded-xl shadow-lg border border-gray-200 hover:shadow-xl transition-shadow duration-300">
                    <!-- Icono -->
                    <div class="bg-blue-100 text-blue-600 w-16 h-16 rounded-full flex items-center justify-center mb-6 shadow-md">
                        <svg class="w-8 h-8" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                           <path stroke-linecap="round" stroke-linejoin="round" d="M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25m18 0A2.25 2.25 0 0018.75 3H5.25A2.25 2.25 0 003 5.25m18 0V12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 12V5.25" />
                        </svg>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-3">2. Simulación</h3>
                    <p class="text-gray-600">Calcula tu ROI potencial al instante. Te mostramos el impacto exacto de la automatización en tus ingresos y costes operativos.</p>
                </div>

                <!-- Paso 3: Implementación -->
                <div class="bg-gray-50 p-8 rounded-xl shadow-lg border border-gray-200 hover:shadow-xl transition-shadow duration-300">
                    <!-- Icono -->
                    <div class="bg-blue-100 text-blue-600 w-16 h-16 rounded-full flex items-center justify-center mb-6 shadow-md">
                         <svg class="w-8 h-8" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                           <path stroke-linecap="round" stroke-linejoin="round" d="M15.59 14.37a6 6 0 01-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 006.16-12.12A14.98 14.98 0 009.63 2.25c-2.69 0-5.22.87-7.22 2.37m13.16 9.74a6 6 0 01-5.84-7.38v4.8m5.84 2.58a14.98 14.98 0 01-6.16 12.12A14.98 14.98 0 019.63 21.75c2.69 0 5.22-.87 7.22-2.37m-13.16-9.74a6 6 0 015.84 7.38v-4.8" />
                        </svg>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-3">3. Implementación</h3>
                    <p class="text-gray-600">Recibes un plan de acción detallado y priorizado, listo para ejecutar. Optimiza tu negocio con precisión quirúrgica.</p>
                </div>

            </div>
        </div>
    </section>


    <!-- Calculador de ROI Interactivo -->
    <section id="roi-calculator" class="bg-gray-100 py-20 md:py-24">
        <div class="container mx-auto px-6">
            <div class="bg-white p-8 md:p-12 rounded-2xl shadow-xl max-w-4xl mx-auto">
                <!-- Título -->
                <h2 class="text-3xl md:text-4xl font-extrabold text-gray-900 text-center mb-4">Calcula tu ROI de Automatización</h2>
                <p class="text-lg text-gray-600 text-center mb-10">Mueve los sliders y descubre tu potencial de ingresos oculto.</p>

                <!-- Grid: Sliders a la izquierda, Resultado a la derecha -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                    
                    <!-- Columna de Sliders -->
                    <div class="space-y-8">
                        <!-- Slider 1: Tráfico Web -->
                        <div>
                            <label for="traffic" class="flex justify-between text-lg font-semibold text-gray-800 mb-2">
                                <span>Visitantes Web / Mes</span>
                                <span id="traffic-value" class="text-blue-600 font-bold">10,000</span>
                            </label>
                            <input type="range" id="traffic" min="1000" max="100000" value="10000" step="1000" class="w-full h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer range-lg" style="accent-color: #2563eb;">
                        </div>

                        <!-- Slider 2: Tasa de Conversión -->
                        <div>
                            <label for="conversion" class="flex justify-between text-lg font-semibold text-gray-800 mb-2">
                                <span>Tasa de Conversión (Lead)</span>
                                <span id="conversion-value" class="text-blue-600 font-bold">2.0%</span>
                            </label>
                            <input type="range" id="conversion" min="0.5" max="10" value="2.0" step="0.1" class="w-full h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer range-lg" style="accent-color: #2563eb;">
                        </div>

                        <!-- Slider 3: Valor de Cliente (LTV) -->
                        <div>
                            <label for="ltv" class="flex justify-between text-lg font-semibold text-gray-800 mb-2">
                                <span>Valor Medio por Cliente (€)</span>
                                <span id="ltv-value" class="text-blue-600 font-bold">€5,000</span>
                            </label>
                            <input type="range" id="ltv" min="500" max="50000" value="5000" step="500" class="w-full h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer range-lg" style="accent-color: #2563eb;">
                        </div>
                    </div>

                    <!-- Columna de Resultados -->
                    <div class="bg-blue-600 text-white p-8 rounded-xl shadow-2xl text-center">
                        <p class="text-xl font-medium text-blue-100 mb-2">Ingresos Mensuales Actuales</p>
                        <div id="current-revenue" class="text-4xl font-extrabold mb-6">€10,000</div>
                        
                        <div class="border-t border-blue-400 my-6"></div>

                        <p class="text-xl font-medium text-blue-100 mb-2">Con un 20% de mejora por fugas:</p>
                        <div id="optimized-revenue" class="text-5xl font-extrabold text-white">€12,000</div>
                        <div id="revenue-gain" class="text-xl font-semibold text-green-300 mt-3">+€2,000 / mes</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

<!--FOOTER -->

<footer class="bg-gray-900 text-gray-400 py-12">
    <div class="container mx-auto px-6 text-center">
        
        <p class="text-2xl font-bold text-white mb-2">Llestia</p>
        
        <p class="text-lg mb-4"> 
            <button id="openContactModalBtn" class="hover:text-white hover:underline transition-all">Contacto</button>
        </p>
        
        <p class="text-sm mb-4">
            <a href="#" class="hover:text-white inline-block">Aviso Legal</a>
            <span class="mx-2">&bull;</span> 
            <a href="#" class="hover:text-white inline-block">Política de Privacidad</a>
        </p>
        
        <p class="text-sm">&copy; 2024 Llestia. Todos los derechos reservados.</p>
    
    </div>
</footer>

    <!-- HTML del Modal-Embed (Tally - Escáner) -->
    <div id="tallyModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-[60] hidden backdrop-blur-sm"> <!-- z-index 60, > header's z-40 -->
        <div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full h-[90vh] overflow-hidden transform transition-all">
            <div class="flex justify-between items-center p-4 border-b">
                <h3 class="text-lg font-bold text-gray-900">Inicia tu Diagnóstico</h3>
                <button id="closeModalBtn" class="text-gray-400 hover:text-gray-600 text-3xl">&times;</button>
            </div>
            
            <div class="w-full h-[calc(90vh-65px)]"> <!-- Ajuste de altura para que quepa el header del modal -->
                <iframe 
                    src="https://tally.so/r/3yL1V4?transparentBackground=1&hideTitle=1"
                    class="w-full h-full border-0"
                    frameborder="0" 
                    marginheight="0" 
                    marginwidth="0" 
                    title="Escáner de Fugas B2B">
                </iframe>
            </div>
        </div>
    </div>

    <!-- AÑADIDO: HTML del Modal-Embed (Tally - Contacto) -->
    <div id="contactModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-[60] hidden backdrop-blur-sm">
        <div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full h-[90vh] overflow-hidden transform transition-all">
            <div class="flex justify-between items-center p-4 border-b">
                <h3 class="text-lg font-bold text-gray-900">Contacto</h3>
                <button id="closeContactModalBtn" class="text-gray-400 hover:text-gray-600 text-3xl">&times;</button>
            </div>
            
            <div class="w-full h-[calc(90vh-65px)]"> <!-- Ajuste de altura -->
                <iframe 
                    src="https://tally.so/r/3NKrab?transparentBackground=1&hideTitle=1"
                    class="w-full h-full border-0"
                    frameborder="0" 
                    marginheight="0" 
                    marginwidth="0" 
                    title="Formulario de Contacto">
                </iframe>
            </div>
        </div>
    </div>


    <!-- Scripts de JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            // --- Lógica del Calculador de ROI ---
            const trafficSlider = document.getElementById('traffic');
            const conversionSlider = document.getElementById('conversion');
            const ltvSlider = document.getElementById('ltv');

            const trafficValue = document.getElementById('traffic-value');
            const conversionValue = document.getElementById('conversion-value');
            const ltvValue = document.getElementById('ltv-value');

            const currentRevenueEl = document.getElementById('current-revenue');
            const optimizedRevenueEl = document.getElementById('optimized-revenue');
            const revenueGainEl = document.getElementById('revenue-gain');

            function formatCurrency(num) {
                return new Intl.NumberFormat('es-ES', { style: 'currency', currency: 'EUR', minimumFractionDigits: 0, maximumFractionDigits: 0 }).format(num);
            }

            function updateROI() {
                // Añadir comprobación por si los sliders no existen
                if (!trafficSlider || !conversionSlider || !ltvSlider) return;
                
                const traffic = parseFloat(trafficSlider.value);
                const conversion = parseFloat(conversionSlider.value) / 100;
                const ltv = parseFloat(ltvSlider.value);

                // Actualizar etiquetas de los sliders
                trafficValue.textContent = new Intl.NumberFormat('es-ES').format(traffic);
                conversionValue.textContent = `${conversionSlider.value}%`;
                ltvValue.textContent = formatCurrency(ltv);

                // Calcular resultados
                const leads = traffic * conversion;
                const currentRevenue = leads * ltv;
                const optimizationGain = 0.20; // 20% de mejora
                const optimizedRevenue = currentRevenue * (1 + optimizationGain);
                const revenueGain = optimizedRevenue - currentRevenue;

                // Actualizar panel de resultados
                currentRevenueEl.textContent = formatCurrency(currentRevenue);
                optimizedRevenueEl.textContent = formatCurrency(optimizedRevenue);
                revenueGainEl.textContent = `+${formatCurrency(revenueGain)} / mes`;
            }

            // Event Listeners para los sliders
            if (trafficSlider && conversionSlider && ltvSlider) {
                [trafficSlider, conversionSlider, ltvSlider].forEach(slider => {
                    slider.addEventListener('input', updateROI);
                });
                // Inicializar calculadora
                updateROI();
            }

            
            // --- Lógica de Animación TypeIt ---
            if (document.getElementById('typeit-hero')) {
                new TypeIt('#typeit-hero', {
                    strings: [
                        'Identifica tus fugas de ingresos.',
                        'Automatiza tus procesos manuales.',
                        'Deja de perder leads cualificados.',
                        'Consigue más resultados con el mismo equipo.'
                    ],
                    speed: 35,
                    deleteSpeed: 20,
                    breakLines: false,
                    waitUntilVisible: true,
                    loop: true,
                    afterString: (step, instance) => {
                        instance.pause(2500); // Pausa de 2.5s después de escribir
                    }
                }).go();
            }


            // --- Lógica de Smooth Scroll (Solución JS) ---
            
            // Función para manejar el scroll suave
            function smoothScroll(targetId) {
                const targetElement = document.getElementById(targetId);
                if (targetElement) {
                    // Prevenir el salto brusco del ancla
                    event.preventDefault(); 
                    // Hacer scroll suave
                    targetElement.scrollIntoView({ behavior: 'smooth' });
                }
            }

            // Botón del Hero
            const ctaRoiButton = document.getElementById('cta-roi');
            if (ctaRoiButton) {
                ctaRoiButton.addEventListener('click', function(event) {
                    smoothScroll('roi-calculator');
                });
            }

            // Botón de la Navegación (con el ID actualizado)
            const navCtaRoiButton = document.getElementById('nav-roi-link');
            if (navCtaRoiButton) {
                navCtaRoiButton.addEventListener('click', function(event) {
                    smoothScroll('roi-calculator');
                });
            }

            
            // --- Lógica del Header de Conversión (Scroll) ---
            const navRoiLink = document.getElementById('nav-roi-link');
            const navScanButton = document.getElementById('nav-scan-button');

            if (navRoiLink && navScanButton) {
                window.addEventListener('scroll', function() {
                    // Aparece después de 100px de scroll
                    if (window.scrollY > 100) { 
                        navRoiLink.classList.remove('opacity-0', 'invisible', '-translate-y-2');
                        navRoiLink.classList.add('opacity-100', 'visible', 'translate-y-0');

                        navScanButton.classList.remove('opacity-0', 'invisible', '-translate-y-2');
                        navScanButton.classList.add('opacity-100', 'visible', 'translate-y-0');
                    } else {
                        navRoiLink.classList.add('opacity-0', 'invisible', '-translate-y-2');
                        navRoiLink.classList.remove('opacity-100', 'visible', 'translate-y-0');
                        
                        navScanButton.classList.add('opacity-0', 'invisible', '-translate-y-2');
                        navScanButton.classList.remove('opacity-100', 'visible', 'translate-y-0');
                    }
                });
            }

            // --- LÓGICA DEL MODAL (TALLY EMBED - ESCÁNER) ---
            const modal = document.getElementById('tallyModal');
            const openButtons = document.querySelectorAll('.open-modal-btn'); // Selecciona por clase
            const closeBtn = document.getElementById('closeModalBtn');

            if (modal && openButtons.length > 0 && closeBtn) {
                
                // Abrir modal con cualquiera de los botones
                openButtons.forEach(btn => {
                    btn.addEventListener('click', () => {
                        modal.classList.remove('hidden');
                    });
                });

                // Cerrar modal con el botón X
                closeBtn.addEventListener('click', () => {
                    modal.classList.add('hidden');
                });
                
                // Opcional: Cerrar al hacer clic fuera del modal
                modal.addEventListener('click', function(event) {
                    if (event.target === modal) {
                        modal.classList.add('hidden');
                    }
                });
            }

            // AÑADIDO: --- LÓGICA DEL MODAL (TALLY EMBED - CONTACTO) ---
            const contactModal = document.getElementById('contactModal');
            const openContactBtn = document.getElementById('openContactModalBtn');
            const closeContactBtn = document.getElementById('closeContactModalBtn');

            if (contactModal && openContactBtn && closeContactBtn) {
                
                // Abrir modal de contacto
                openContactBtn.addEventListener('click', (e) => {
                    e.preventDefault(); // Prevenir cualquier comportamiento por defecto
                    contactModal.classList.remove('hidden');
                });

                // Cerrar modal de contacto con el botón X
                closeContactBtn.addEventListener('click', () => {
                    contactModal.classList.add('hidden');
                });
                
                // Opcional: Cerrar al hacer clic fuera del modal
                contactModal.addEventListener('click', function(event) {
                    if (event.target === modal) {
                        contactModal.classList.add('hidden');
                    }
                });
            }

        });
    </script>

</body>
</html>

